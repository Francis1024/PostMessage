### 1.调用方法

在调用我们的SDK前，先在页面引入js

```javascript
<script src="https://sdk.7yol.cn/static/js/JYSdk.js"></script>
```

### 2.接口

#### 2.1用户登录/注册接口

**接口说明**： 用于调用H5平台用户登录／注册窗口，用户完成登录或者注册后，在回调中返回游戏相关的帐号信息。

**接口调用**：JYSdk.login(callback)

**参数说明：**

| **参数** | **说明** | **是否**必须 | **例子**                    |
| -------- | -------- | ------------ | --------------------------- |
| callback | 回调函数 | 是           | function(status, data){   } |

callback**说明：**

| **参数** | **说明** | **例子**                                                     |
| -------- | -------- | ------------------------------------------------------------ |
| status   | 状态     | 0 - 登录／注册成功   1 - 登录／注册失败                      |
| data     | 帐号信息 | 当status=0时同时返回一个JSON data{ user_id:'389461',token:"c9ff1ba035a737a12fa17383fa5240d3"} |

**返回值：**无

#### 2.2  用户退出登录接口

**接口说明**：本接口用于游戏通知SDK进行用户退出登录操作。

**接口调用：**JYSdk.logout(callback)

**参数说明：**

| **参数** | **说明** | **是否**必须 | **例子**              |
| -------- | -------- | ------------ | --------------------- |
| callback | 回调函数 | 是           | function(status){   } |

callback**说明：**

| **参数** | **说明** | **例子**                    |
| -------- | -------- | --------------------------- |
| status   | 状态     | 0 - 注销成功   1 - 注销失败 |

**返回值：**无

#### 2.3支付接口

**接口说明**：用于调用H5游戏平台用户支付窗口，在调用本接口前，游戏先完成自己的下单，然后将相应的支付信息通知我们的SDK，用户完成支付后，我们会在前端返回支付结果，同时我们的服务器端也会通知游戏方的服务端，进行发货请求，请务必以服务端调用为准。

**接口调用：**JYSdk.buy(buyInfo)

**参数说明：**

 

| **参数** | **说明**       | **是否**必须 |
| -------- | -------------- | :----------: |
| buyInfo  | 支付信息(JSON) |      是      |

**buyInfo说明：**

| **字段**         |                    **说明**                    | **是否必须** |
| ---------------- | :--------------------------------------------: | :----------: |
| apple_product_id |                   苹果产品id                   |      否      |
| channel_id       |                     商品ID                     |      是      |
| cpbill           |                    CP订单号                    |      是      |
| price            |                      金额                      |      是      |
| productdesc      |                    产品描述                    |      是      |
| productid        |                     产品id                     |      是      |
| productname      |                    产品名称                    |      是      |
| roleid           |                     角色id                     |      是      |
| rolename         |                    角色名称                    |      是      |
| serverid         |                     区服id                     |      是      |
| servername       |                    区服名称                    |      是      |
| extension        | 扩展数据，如果设置，在发货接口会原样返回该数据 |     可选     |

**返回值：**无

####2.4角色创建日志上报

**接口说明**：本接口用于角色创建日志上报

**接口调用：**JYSdk.createRoles(data,callback)

**参数说明：**

| **参数** | **说明**           | **是否**必须 | **例子**              |
| -------- | ------------------ | :----------: | --------------------- |
| data     | 创建角色信息(JSON) |      是      | 参数见下表            |
| callback | 回调函数           |      是      | function(status){   } |

**callback**说明：

| **参数** | **说明** | **例子**            |
| -------- | -------- | ------------------- |
| status   | 状态     | 0 - 成功   1 - 失败 |

**data参数说明：**

| **参数**    | **说明**   | **是否**必须 | **例子** |
| ----------- | ---------- | ------------ | -------- |
| server_id   | 服务器ID   | 是           |          |
| server_name | 服务器名称 | 是           |          |
| role_id     | 角色ID     | 是           |          |
| role_name   | 角色名     | 是           |          |
| role_lev    | 角色等级   | 是           | 固定为0  |

**返回值：无**

#### 2.5进入游戏日志上报接口

**接口说明**：本接口用于进入游戏日志上报

**接口调用：**JYSdk.enterGame(data,callback)

**参数说明：**

| **参数** | **说明**           | **是否**必须 | **例子**              |
| -------- | ------------------ | :----------: | --------------------- |
| data     | 进入游戏信息(JSON) |      是      | 参数见下表            |
| callback | 回调函数           |      是      | function(status){   } |

**callback**说明：

| **参数** | **说明** | **例子**            |
| -------- | -------- | ------------------- |
| status   | 状态     | 0 - 成功   1 - 失败 |

**data参数说明：**

| **参数**    | **说明**   | **是否**必须 | **例子** |
| ----------- | ---------- | ------------ | -------- |
| server_id   | 服务器ID   | 是           |          |
| server_name | 服务器名称 | 是           |          |
| role_id     | 角色ID     | 是           |          |
| role_name   | 角色名     | 是           |          |
| role_lev    | 角色等级   | 是           |          |

**返回值：无**

#### 2.7进入角色升级上报接口

**接口说明**：本接口用于角色升级日志上报

**接口调用：**JYSdk.roleLevelup(data,callback)

**参数说明：**

| **参数** | **说明**       | **是否**必须 | **例子**              |
| -------- | -------------- | :----------: | --------------------- |
| data     | 角色升级(JSON) |      是      | 参数见下表            |
| callback | 回调函数       |      是      | function(status){   } |

**callback**说明：

| **参数** | **说明** | **例子**            |
| -------- | -------- | ------------------- |
| status   | 状态     | 0 - 成功   1 - 失败 |

**data参数说明：**

| **参数**    | **说明**   | **是否**必须 | **例子** |
| ----------- | ---------- | ------------ | -------- |
| server_id   | 服务器ID   | 是           |          |
| server_name | 服务器名称 | 是           |          |
| role_id     | 角色ID     | 是           |          |
| role_name   | 角色名     | 是           |          |
| role_lev    | 角色等级   | 是           |          |

**返回值：无**



######**最后更新时间** 2019-03-29-3:10